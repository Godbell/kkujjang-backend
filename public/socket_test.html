<!doctype html>
<html>
  <head>
    <title>끝말잇기의 짱, 끝짱</title>
  </head>
  <body>
    <button id="disconnect"></button>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      /**
       * @param {{
       *   roomOwnerUserId: number;
       *   title: string;
       *   password: string;
       *   maxUserCount: number;
       *   maxRound: number;
       *   roundTimeLimit: number;
       * }} roomConfig
       * @returns {string}
       */
      const roomConfig = {
        title: '방제목',
        password: '1234',
        maxUserCount: 4,
        maxRound: 3,
        roundTimeLimit: 5,
      }

      const socket = io('http://localhost:3000')

      socket.on('complete load room list', (res) => {
        console.log(`load room list: ${JSON.stringify(res)}`)
      })

      socket.on('complete create room', () => {
        console.log(`create room`)
        socket.emit('load room list')
      })

      socket.on('some user join room', (userId) => {
        console.log(`some user join room: ${userId}`)
        socket.emit('load room')
      })

      socket.on('some user leave room', (userId) => {
        console.log(`some user leave room: ${userId}`)
        socket.emit('load room')
      })

      socket.on('complete leave room', () => {
        console.log('complete leave room')
      })

      socket.on('complete load room', (res) => {
        console.log(`load room: ${JSON.stringify(res)}`)
      })

      socket.on('complete join room', (res) => {
        socket.emit('load room')
      })

      socket.on('change room owner', (res) => {
        socket.emit('load room')
      })

      socket.on('error', (err) => {
        console.log(`error: ${JSON.stringify(err)}`)
      })

      socket.emit('load room list')
      socket.emit('create room', roomConfig)

      document.getElementById('disconnect').addEventListener('click', () => {
        socket.disconnect()
      })
    </script>
  </body>
</html>
